{"version":3,"sources":["file:///Users/baitengfei/code/EscapeRoom/EscapeRoomMVP/assets/Scripts/Data/Scene_S3.ts"],"names":["_decorator","Node","Animation","EventManager","SceneManager","SoundManager","UIManager","UIType","GameData","EventEnum","SceneBase","ccclass","property","Scene_S3","type","mClickDoorTimes","start","mMainScene","active","mNode_Door","mNode_DoorAnim","update","deltaTime","show","showScene","hide","hideScene","hideAll","ToMainScene","OnClickLeftTrigger","Instance","GoLeftScene","ClickBigDoor","ins","mUserData","mbUnlockDoor","OpenDoor","PlaySound","mbLockDoorTips","ShowTips","closeUI","Item_Watch","Bag","Game","getComponent","play","scheduleOnce","openUI","Win","onEnable","addListener","onDisable","removeListener","OnClickLockDoor"],"mappings":"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","sourcesContent":["import { _decorator, Component, Node, UIMeshRenderer, Animation } from 'cc';\nimport { EventManager } from '../Manager/EventManager';\nimport { SceneManager } from '../Manager/SceneManager';\nimport { SoundManager } from '../Manager/SoundManager';\nimport { UIManager, UIType } from '../Manager/UIManager';\nimport { GameData } from './GameData';\nimport { EventEnum } from './GameEnum';\nimport { SceneBase } from './SceneBase';\nconst { ccclass, property } = _decorator;\n\n@ccclass('Scene_S3')\nexport class Scene_S3 extends SceneBase {\n    @property({type:Node})\n    mMainScene:Node;\n\n\n    @property({type:Node})\n    mNode_Door:Node;\n\n    @property({type:Node})\n    mNode_DoorAnim:Node;\n\n    start() {\n        this.mMainScene.active = false;\n        this.mNode_Door.active = true;\n        this.mNode_DoorAnim.active = false;\n    }\n\n    update(deltaTime: number) {\n        \n    }\n\n    show() {\n        this.showScene(this.mMainScene);\n    }\n    hide() {\n        this.hideScene(this.mMainScene);\n    }\n    hideAll() {\n        this.mMainScene.active = false;\n \n    }\n    ToMainScene() {\n    \n        this.show();\n    }\n    \n\n    mClickDoorTimes:number = 0;\n\n    OnClickLeftTrigger() {\n        SceneManager.Instance.GoLeftScene();\n    }\n\n    ClickBigDoor() {\n        if (GameData.ins().mUserData.mbUnlockDoor) {\n            this.OpenDoor();\n        }\n        else {\n            SoundManager.Instance.PlaySound(\"lock\");\n            if (GameData.ins().mUserData.mbLockDoorTips) {\n                UIManager.Instance.ShowTips(\"这个锁没有钥匙孔，要用特殊工具解开\");\n            }\n            else {\n                this.mClickDoorTimes += 1;\n\n                if (this.mClickDoorTimes == 1) {\n                    UIManager.Instance.ShowTips(\"我居然被锁了，恶作剧吗这是\");\n                }\n                if (this.mClickDoorTimes == 2) {\n                    UIManager.Instance.ShowTips(\"这个锁没有钥匙孔，怎么打开\");\n                }\n                GameData.ins().mUserData.mbLockDoorTips = true;\n            }\n        }\n    }\n\n    OpenDoor() {\n        UIManager.Instance.closeUI(UIType.Item_Watch);\n        UIManager.Instance.closeUI(UIType.Bag);\n        UIManager.Instance.closeUI(UIType.Game);\n\n        this.mNode_Door.active = false;\n        this.mNode_DoorAnim.active = true;\n        this.mNode_DoorAnim.getComponent(Animation).play();\n\n        this.scheduleOnce(()=>{\n            UIManager.Instance.openUI(UIType.Win);\n        }, 1.0);\n    }\n\n    onEnable() {\n        EventManager.addListener(EventEnum.OpenDoor, this.OpenDoor, this);\n    }\n\n    onDisable() {\n        EventManager.removeListener(EventEnum.OpenDoor, this.OpenDoor);\n    }\n\n    OnClickLockDoor() {\n        UIManager.Instance.ShowTips(\"门是锁的\");\n    }\n}\n\n"]}