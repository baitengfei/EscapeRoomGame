{"version":3,"sources":["file:///Users/baitengfei/code/EscapeRoom/EscapeRoomMVP/assets/Scripts/UI/UI_Bag.ts"],"names":["_decorator","Sprite","Color","Button","UIBase","GameData","EventEnum","EventManager","SceneManager","SoundManager","UIManager","UIType","ccclass","property","UI_Bag","Item_Phone","Item_Watch","Item_Key","onStart","getNode","on","OnClickPhone","OnClickWatch","OnClickKey","refresh","UpdateItems","active","ins","mUserData","mbGetItem_Phone","mbGetItem_Watch","mbGetItem_Key","mbUnlockDrawer","getComponent","color","GRAY","interactable","Instance","openUI","PlaySound","mCurrentSceneIndex","SaveBaseData","ShowTips","onEnable","addListener","UpdateItem","onDisable","removeListener"],"mappings":"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","sourcesContent":["\nimport { _decorator, Component, Node, Label, instantiate, Vec3, Tween, tween, UIMeshRenderer, Sprite, Color, Button } from 'cc';\nimport { UIBase } from '../Base/UIBase';\nimport { CfgUtil } from '../Config/CfgUtil';\nimport { GameData } from '../Data/GameData';\nimport { EventEnum } from '../Data/GameEnum';\nimport { EventManager } from '../Manager/EventManager';\nimport { GameManager } from '../Manager/GameManager';\nimport { SceneManager } from '../Manager/SceneManager';\nimport { SoundManager } from '../Manager/SoundManager';\nimport { UIManager, UIType } from '../Manager/UIManager';\nimport { Tools } from '../Tool/Tools';\nimport { UI_Item_Phone } from './UI_Item_Phone';\nimport { UI_Item_Watch } from './UI_Item_Watch';\nconst { ccclass, property } = _decorator;\n\n@ccclass('UI_Bag')\nexport class UI_Bag extends UIBase {\n\n    Item_Phone:Node;\n    Item_Watch:Node;\n    Item_Key:Node;\n\n    onStart() {\n        this.Item_Phone = this.getNode(\"bg/Layout/Item_Phone\");\n        this.Item_Phone.on(\"click\", this.OnClickPhone, this);\n\n\n        this.Item_Watch = this.getNode(\"bg/Layout/Item_Watch\");\n        this.Item_Watch.on(\"click\", this.OnClickWatch, this);\n\n\n        this.Item_Key = this.getNode(\"bg/Layout/Item_Key\");\n        this.Item_Key.on(\"click\", this.OnClickKey, this);\n\n    }\n\n    refresh() {\n        this.UpdateItems();\n    }\n    UpdateItems() {\n        this.Item_Phone.active = GameData.ins().mUserData.mbGetItem_Phone;\n        this.Item_Watch.active = GameData.ins().mUserData.mbGetItem_Watch;\n\n        this.Item_Key.active = GameData.ins().mUserData.mbGetItem_Key;\n        if(GameData.ins().mUserData.mbUnlockDrawer) {\n            this.Item_Key.getComponent(Sprite).color = Color.GRAY;\n            this.Item_Key.getComponent(Button).interactable = false;\n\n        }\n    }\n\n    OnClickPhone() {\n        UIManager.Instance.openUI(UIType.Item_Phone);\n        SoundManager.Instance.PlaySound(\"item\");\n    }\n    \n    OnClickWatch() {\n        UIManager.Instance.openUI(UIType.Item_Watch);\n        SoundManager.Instance.PlaySound(\"item\");\n    }\n    \n    OnClickKey() {\n        SoundManager.Instance.PlaySound(\"item\");\n    \n        if (SceneManager.Instance.mCurrentSceneIndex == 1) {\n            GameData.ins().mUserData.mbUnlockDrawer = true;\n            GameData.ins().SaveBaseData;\n\n            UIManager.Instance.ShowTips(\"抽屉打开了\");\n            this.UpdateItems();\n\n        }\n        else {\n            UIManager.Instance.ShowTips(\"一把钥匙\");\n        }\n    }\n\n    onEnable() {\n        EventManager.addListener(EventEnum.UpdateItem, this.UpdateItems, this);\n    }\n\n    onDisable() {\n        EventManager.removeListener(EventEnum.UpdateItem, this.UpdateItems);\n    }\n\n}\n\n"]}