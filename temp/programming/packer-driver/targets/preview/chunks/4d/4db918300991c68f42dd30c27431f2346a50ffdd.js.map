{"version":3,"sources":["file:///Users/baitengfei/code/EscapeRoom/EscapeRoomMVP/assets/Scripts/UI/UI_Game.ts"],"names":["_decorator","Label","UIBase","GameData","EventEnum","EventManager","SceneManager","SoundManager","ccclass","property","UI_Game","Btn_Left","Btn_Right","Btn_Back","TipsNode","TipsContent","mbShowTipsContent","onStart","getNode","on","OnClickLeft","OnClickRight","OnClickBack","OnClickTips","refresh","updateBtns","active","Instance","mbBigScene","mCurrentSceneIndex","mbNeedHideBackBtn","ins","mUserData","mbGetItem_Phone","PlaySound","GoLeftScene","GoRightScene","BackToMainScene","ProcessTipsContent","tips","mbLockDrawerTips","mbUnlockDrawer","mbUnlockDoor","getComponentInChildren","string","onEnable","addListener","ChangeScene","onDisable","removeListener"],"mappings":"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","sourcesContent":["\nimport { _decorator, Component, Node, Label, instantiate, Vec3, Tween, tween, game } from 'cc';\nimport { UIBase } from '../Base/UIBase';\nimport { CfgUtil } from '../Config/CfgUtil';\nimport { GameData } from '../Data/GameData';\nimport { EventEnum } from '../Data/GameEnum';\nimport { EventManager } from '../Manager/EventManager';\nimport { GameManager } from '../Manager/GameManager';\nimport { SceneManager } from '../Manager/SceneManager';\nimport { SoundManager } from '../Manager/SoundManager';\nimport { UIManager, UIType } from '../Manager/UIManager';\nimport GameAd from '../SDK/GameAd';\nimport { Tools } from '../Tool/Tools';\nconst { ccclass, property } = _decorator;\n\n@ccclass('UI_Game')\nexport class UI_Game extends UIBase {\n\n    Btn_Left:Node;\n    Btn_Right:Node;\n    Btn_Back:Node;\n\n    TipsNode:Node;\n    TipsContent:Node;\n\n    onStart() {\n        this.Btn_Left = this.getNode(\"Btn_Left\");\n        this.Btn_Left.on(\"click\", this.OnClickLeft, this);\n\n        this.Btn_Right = this.getNode(\"Btn_Right\");\n        this.Btn_Right.on(\"click\", this.OnClickRight, this);\n\n        this.Btn_Back = this.getNode(\"Btn_Back\");\n        this.Btn_Back.on(\"click\", this.OnClickBack, this);\n\n        this.TipsNode = this.getNode(\"Tips\");\n        this.TipsNode.on(\"click\", this.OnClickTips, this);\n        this.TipsContent = this.getNode(\"Tips/Tips_content\");\n    }\n\n    refresh() {\n        this.updateBtns();\n    }\n\n    updateBtns() {\n        \n        this.Btn_Back.active = !SceneManager.Instance.mbBigScene;\n        this.Btn_Left.active = false;\n        this.Btn_Right.active = SceneManager.Instance.mbBigScene;\n\n        // 根据场景检测隐藏左右箭头\n        if (SceneManager.Instance.mCurrentSceneIndex == 0) {\n            this.Btn_Right.active = false;\n        }\n        if (SceneManager.Instance.mbNeedHideBackBtn) {\n            this.Btn_Back.active = false;\n        }\n        //捡到手机后显示 Tips 图标\n        this.TipsNode.active = GameData.ins().mUserData.mbGetItem_Phone;\n        this.TipsContent.active = this.mbShowTipsContent;\n    }\n\n    OnClickLeft() {\n        SoundManager.Instance.PlaySound(\"click\", 1);\n        SceneManager.Instance.GoLeftScene();\n        this.updateBtns();\n    }\n    OnClickRight() {\n        SoundManager.Instance.PlaySound(\"click\", 1);\n        SceneManager.Instance.GoRightScene();\n        this.updateBtns();\n    }\n    OnClickBack() {\n        SoundManager.Instance.PlaySound(\"click\", 1);\n        SceneManager.Instance.BackToMainScene();\n        this.updateBtns();\n    }\n\n    mbShowTipsContent:boolean = false;\n    OnClickTips() {\n\n        this.ProcessTipsContent();\n        \n    }\n\n    ProcessTipsContent() {\n        this.mbShowTipsContent = true;\n        this.TipsContent.active = true;\n        let tips = \"\";\n\n        if(!GameData.ins().mUserData.mbLockDrawerTips) {\n            tips = \"找找抽屉\";\n        }\n        else if(!GameData.ins().mUserData.mbUnlockDrawer) {\n            tips = \"找找钥匙\";\n        \n        }\n        else if(!GameData.ins().mUserData.mbUnlockDoor) {\n            tips = \"手表可以解锁大门\";\n        }\n\n        this.TipsContent.getComponentInChildren(Label).string = tips;\n    }\n\n    onEnable() {\n        EventManager.addListener(EventEnum.ChangeScene, this.updateBtns, this);\n    }\n\n    onDisable() {\n        EventManager.removeListener(EventEnum.ChangeScene, this.updateBtns);\n    }\n\n}\n\n"]}