{"version":3,"sources":["file:///Users/baitengfei/code/EscapeRoom/EscapeRoomMVP/assets/Scripts/SDK/GameAd.ts"],"names":["sys","_decorator","UIManager","WXAPI","ccclass","property","GameAd","mAdCallBack","mFailCallBack","getInstance","_instance","SendAdReward","console","log","ShowAd","_callBack","_failBack","platform","Platform","WECHAT_GAME","self","ins","CreateAd","bLookOver","Instance","ShowTips","window"],"mappings":";;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,G,OAAAA,G;AAAKC,MAAAA,U,OAAAA,U;;AAILC,MAAAA,S,iBAAAA,S;;AACAC,MAAAA,K,iBAAAA,K;;;;;;;;;OAEH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBJ,U;;yBAGTK,M,GADpBF,O,qBAAD,MACqBE,MADrB,CAC4B;AAAA;AAAA,eAgBxBC,WAhBwB;AAAA,eAiBxBC,aAjBwB;AAAA;;AAEC,eAAXC,WAAW,GAAG;AACxB,cAAI,KAAKC,SAAL,IAAkB,IAAtB,EACI,KAAKA,SAAL,GAAiB,IAAIJ,MAAJ,EAAjB;AAEJ,iBAAO,KAAKI,SAAZ;AACH;;AAEMC,QAAAA,YAAY,GAAG;AAClBC,UAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ;;AACA,cAAI,KAAKN,WAAL,IAAoB,IAAxB,EAA8B;AAC1B,iBAAKA,WAAL;AACH;AACJ;;AAIMO,QAAAA,MAAM,CAACC,SAAD,EAAiBC,SAAjB,EAAwC;AAAA,cAAvBA,SAAuB;AAAvBA,YAAAA,SAAuB,GAAN,IAAM;AAAA;;AACjD,eAAKT,WAAL,GAAmBQ,SAAnB;AACA,eAAKP,aAAL,GAAqBQ,SAArB;;AACA,cAAIhB,GAAG,CAACiB,QAAJ,KAAiBjB,GAAG,CAACkB,QAAJ,CAAaC,WAAlC,EAA+C;AAC3C,gBAAIC,IAAI,GAAG,IAAX;AACA;AAAA;AAAA,gCAAMC,GAAN,GAAYC,QAAZ,CAAqB,yBAArB,EAAiDC,SAAD,IAAa;AACzD,kBAAIA,SAAJ,EAAe;AACXH,gBAAAA,IAAI,CAACb,WAAL;AACH,eAFD,MAGK;AACD,oBAAIa,IAAI,CAACZ,aAAL,IAAsB,IAA1B,EAAgC;AAC5BY,kBAAAA,IAAI,CAACZ,aAAL;AACH;;AACD;AAAA;AAAA,4CAAUgB,QAAV,CAAmBC,QAAnB,CAA4B,iBAA5B;AACH;AACJ,aAVD;AAWA;AAAA;AAAA,gCAAMJ,GAAN,GAAYP,MAAZ,CAAmB,yBAAnB;AACH,WAdD,MAeK;AACDC,YAAAA,SAAS;AACZ;AACJ;;AAvCuB,O,UACTL,S,GAAoB,I;;AAwCvCgB,MAAAA,MAAM,CAAC,QAAD,CAAN,GAAmBpB,MAAM,CAACG,WAAP,EAAnB","sourcesContent":["import { sys, _decorator } from \"cc\";\r\nimport { GameData } from \"../Data/GameData\";\r\nimport { EventEnum } from \"../Data/GameEnum\";\r\nimport { EventManager } from \"../Manager/EventManager\";\r\nimport { UIManager } from \"../Manager/UIManager\";\r\nimport { WXAPI } from \"./WXAPI\";\r\n\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass\r\nexport default class GameAd {\r\n    private static _instance: GameAd = null;\r\n    public static getInstance() {\r\n        if (this._instance == null)\r\n            this._instance = new GameAd();\r\n\r\n        return this._instance;\r\n    }\r\n\r\n    public SendAdReward() {\r\n        console.log(\"发放广告奖励\");\r\n        if (this.mAdCallBack != null) {\r\n            this.mAdCallBack();\r\n        }\r\n    }\r\n\r\n    mAdCallBack:any;\r\n    mFailCallBack:any;\r\n    public ShowAd(_callBack: any, _failBack: any = null) {\r\n        this.mAdCallBack = _callBack;\r\n        this.mFailCallBack = _failBack;\r\n        if (sys.platform === sys.Platform.WECHAT_GAME) {\r\n            let self = this;\r\n            WXAPI.ins().CreateAd(\"adunit-7ed55f4bda385fee\", (bLookOver)=>{\r\n                if (bLookOver) {\r\n                    self.mAdCallBack();\r\n                }\r\n                else {\r\n                    if (self.mFailCallBack != null) {\r\n                        self.mFailCallBack();\r\n                    }\r\n                    UIManager.Instance.ShowTips(\"广告观看时间不足，无法领取奖励\");\r\n                }\r\n            });\r\n            WXAPI.ins().ShowAd(\"adunit-7ed55f4bda385fee\");\r\n        }\r\n        else {\r\n            _callBack();\r\n        }\r\n    }\r\n}\r\nwindow[\"GameAd\"] = GameAd.getInstance();"]}